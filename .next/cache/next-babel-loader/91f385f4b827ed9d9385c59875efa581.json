{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport composeRefs from '@seznam/compose-react-refs';\nimport { setCodeMode, getCodeMode } from './codi.js';\nimport ReactDOM from 'react-dom';\n\nclass IframeBase extends React.Component {\n  render() {\n    let _this$props = this.props,\n        {\n      theRef\n    } = _this$props,\n        ps = _objectWithoutProperties(_this$props, [\"theRef\"]);\n\n    return __jsx(\"iframe\", _extends({\n      ref: composeRefs(theRef, i => {\n        this.listener && window.removeEventListener('message', this.listener);\n        window.addEventListener('message', this.listener = m => {\n          if (m.source === i.contentWindow) {\n            setCodeMode('user', () => this.props.onMessage(m));\n          }\n        });\n        if (this.props.winReact) ReactDOM.render(this.props.winReact, i.contentWindow);\n        composeRefs(this.props.windowRef)(i.contentWindow);\n      })\n    }, ps));\n  }\n\n}\n\nlet Iframe;\nexport default Iframe = {\n  canRenderHTML: true,\n  html: React.forwardRef((props, ref) => __jsx(IframeBase, _extends({}, props, {\n    theRef: ref\n  })))\n};","map":{"version":3,"sources":["/home/graham/st/OLWebFull/src/Iframe.js"],"names":["React","composeRefs","setCodeMode","getCodeMode","ReactDOM","IframeBase","Component","render","props","theRef","ps","i","listener","window","removeEventListener","addEventListener","m","source","contentWindow","onMessage","winReact","windowRef","Iframe","canRenderHTML","html","forwardRef","ref"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,WAAvC;AACA,OAAOC,QAAP,MAAqB,WAArB;;AACA,MAAMC,UAAN,SAAyBL,KAAK,CAACM,SAA/B,CAAwC;AACxCC,EAAAA,MAAM,GAAE;AAAC,sBAAqB,KAAKC,KAA1B;AAAA,QAAI;AAACC,MAAAA;AAAD,KAAJ;AAAA,QAAeC,EAAf;;AAAgC,WAAQ;AAAQ,MAAA,GAAG,EAAIT,WAAW,CAACQ,MAAD,EAASE,CAAD,IAAO;AACtF,aAAKC,QAAL,IAAiBC,MAAM,CAACC,mBAAP,CAA2B,SAA3B,EAAqC,KAAKF,QAA1C,CAAjB;AACAC,QAAAA,MAAM,CAACE,gBAAP,CAAwB,SAAxB,EAAkC,KAAKH,QAAL,GAAgBI,CAAC,IAAI;AAAC,cAAGA,CAAC,CAACC,MAAF,KAAaN,CAAC,CAACO,aAAlB,EAAgC;AAAChB,YAAAA,WAAW,CAAC,MAAD,EAAS,MAAM,KAAKM,KAAL,CAAWW,SAAX,CAAqBH,CAArB,CAAf,CAAX;AAAmD;AAAC,SAA7I;AACA,YAAG,KAAKR,KAAL,CAAWY,QAAd,EAAuBhB,QAAQ,CAACG,MAAT,CAAgB,KAAKC,KAAL,CAAWY,QAA3B,EAAoCT,CAAC,CAACO,aAAtC;AAC3BjB,QAAAA,WAAW,CAAC,KAAKO,KAAL,CAAWa,SAAZ,CAAX,CAAkCV,CAAC,CAACO,aAApC;AACC,OAL0E;AAA1B,OAKzCR,EALyC,EAAR;AAKlB;;AANiB;;AASxC,IAAIY,MAAJ;AACA,eAAeA,MAAM,GAAG;AAACC,EAAAA,aAAa,EAAE,IAAhB;AAAqBC,EAAAA,IAAI,EAAExB,KAAK,CAACyB,UAAN,CAAiB,CAACjB,KAAD,EAAOkB,GAAP,KAAgB,MAAC,UAAD,eAAgBlB,KAAhB;AAAuB,IAAA,MAAM,EAAIkB;AAAjC,KAAjC;AAA3B,CAAxB","sourcesContent":["import React from 'react'\nimport composeRefs from '@seznam/compose-react-refs'\nimport {setCodeMode, getCodeMode} from './codi.js'\nimport ReactDOM from 'react-dom'\nclass IframeBase extends React.Component{\nrender(){let {theRef,...ps} = this.props;return (<iframe ref = {composeRefs(theRef,(i) => {\n    this.listener && window.removeEventListener('message',this.listener); \n    window.addEventListener('message',this.listener = m => {if(m.source === i.contentWindow){setCodeMode('user', () => this.props.onMessage(m))}});\n    if(this.props.winReact)ReactDOM.render(this.props.winReact,i.contentWindow);\ncomposeRefs(this.props.windowRef)(i.contentWindow)\n})} {...ps}></iframe>)}\n\n}\nlet Iframe;\nexport default Iframe = {canRenderHTML: true,html: React.forwardRef((props,ref) => (<IframeBase {...props} theRef = {ref}></IframeBase>))}"]},"metadata":{},"sourceType":"module"}