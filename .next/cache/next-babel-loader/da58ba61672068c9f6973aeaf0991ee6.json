{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _Map from \"@babel/runtime-corejs2/core-js/map\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport root from 'react-shadow';\nimport Window_ from '../../src/Window.js';\nimport Iframe_ from '../../src/Iframe.js';\nimport MainWelcomePage from '../index.js';\nimport Desktop3D from '../3desktop/index.js';\nimport { chromeSwitch } from '../../../OLEx/dist/index.js';\nimport DiscordPolyfill from '../../src/DiscordPolyfill.js';\nimport Discord from '../discord/index.js';\nimport AAPI from '../../src/appi.js';\nimport * as R from 'ramda';\nimport * as Polyglot from 'node-polyglot';\nimport { create } from \"react-test-renderer\";\n\nvar Desktop =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Desktop, _React$Component);\n\n  function Desktop() {\n    var _this;\n\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Desktop);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Desktop).call(this, props));\n    _this.state = {\n      objectTagSheet: {},\n      HotTable: null,\n      appDataMap: new _Map(),\n      windows: [],\n      d_a: undefined,\n      javaPackage: undefined,\n      jlink: undefined\n    };\n    _this.state = _Object$assign({}, _this.state, function () {\n      try {\n        return {\n          javaPackage: Packages.com.smalltalkland.slandroid,\n          jlink: jlink\n        };\n      } catch (err) {\n        return {};\n      }\n    }());\n    _this.aapi_ = AAPI(React)(props.mode);\n\n    _this.aapi = function (code) {\n      return _this.aapi_(_assertThisInitialized(_this), _this.addWindow.bind(_assertThisInitialized(_this)))(code);\n    };\n\n    try {\n      _this.renderExWinPossibly = chromeSwitch(function () {\n        return __jsx(\"span\", null);\n      }, _this.renderExWin.bind(_assertThisInitialized(_this)));\n    } catch (err) {\n      _this.renderExWinPossibly = function () {\n        return __jsx(\"span\", null);\n      };\n    }\n\n    ;\n    var f;\n\n    try {\n      f = fetch;\n    } catch (err) {\n      f = function f() {\n        return _Promise.reject();\n      };\n    }\n\n    ;\n    f('/pages/api/usr').then(function (r) {\n      return r.text();\n    }).then(function (t) {})[\"catch\"](function (err) {});\n\n    try {\n      if (navigator) import('@handsontable/react').then(function (m) {\n        return _this.mounted && _this.setState({\n          HotTable: m.HotTable\n        });\n      });\n    } catch (err) {}\n\n    ;\n    import('react-mutation-observer').then(function (m) {\n      return _this.setState({\n        d_a: m\n      });\n    })[\"catch\"](function (err) {});\n    return _this;\n  }\n\n  _createClass(Desktop, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // Typical usage (don't forget to compare props):\n      if (prevProps.mode !== this.props.mode) this.aapi_ = AAPI(React)(this.props.mode);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.mounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n    }\n  }, {\n    key: \"addWindow\",\n    value: function addWindow(w) {\n      var _this2 = this;\n\n      return new _Promise(function (c) {\n        return _this2.setState(function (s) {\n          return {\n            windows: s.windows.concat([w])\n          };\n        }, c);\n      });\n    }\n  }, {\n    key: \"removeWindow\",\n    value: function removeWindow(w) {\n      var _this3 = this;\n\n      return new _Promise(function (c) {\n        return _this3.setState(function (s) {\n          return {\n            windows: s.windows.filter(function (sw) {\n              return sw.id !== w.id;\n            })\n          };\n        });\n      });\n    }\n  }, {\n    key: \"renderExWin\",\n    value: function renderExWin(Div, Window) {\n      return __jsx(Window, null, __jsx(Div, null));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var wrap = R.identity;\n      var HotTable;\n\n      try {\n        if (navigator) HotTable = this.state.HotTable;\n      } catch (err) {\n        HotTable = function HotTable(props) {\n          return __jsx(\"span\", null);\n        };\n      }\n\n      ;\n      var isBrowser = false;\n\n      try {\n        navigator;\n        isBrowser = true;\n      } catch (err) {}\n\n      ;\n      var discord = this.discord;\n      var Div = this.props.div || root.div;\n      var Window = this.props.Window || Window_;\n      var Iframe = this.props.Iframe || Iframe_;\n      if (this.props.head === 'less') wrap = R.pipe(wrap, create);\n\n      var MyMutationObserver = this.props.Observer || this.state.d_a && this.state.d_a.MutationObserver || function (props) {\n        return props.children;\n      };\n\n      MyMutationObserver = function (Old) {\n        return function (props) {\n          return Old && __jsx(Old, _extends({}, props, {\n            subtree: true\n          }), props.children);\n        };\n      }(MyMutationObserver);\n\n      MyMutationObserver = MyMutationObserver || function (props) {\n        return props.children;\n      };\n\n      var windows = (this.props.windows || []).concat(this.props.div === null ? [{\n        id: 'welcome',\n        render: function render(React) {\n          return __jsx(MainWelcomePage, null);\n        }\n      }] : []).concat(discord ? [{\n        id: 'discord',\n        render: function render(React, lib) {\n          var theDiscord = Discord(React, useState);\n          return __jsx(lib.Div, null, __jsx(\"theDiscord\", {\n            lib: lib,\n            discord: discord\n          }));\n        }\n      }] : []).concat(isBrowser && Desktop3D ? [{\n        id: 'three',\n        render: function render(rct) {\n          return __jsx(Desktop3D, {\n            dcls: Desktop,\n            linkParent: _this4\n          });\n        }\n      }] : []).concat([]).concat(this.state.windows);\n      return wrap(__jsx(MyMutationObserver, null, __jsx(Div, null, this.props.div === null ? __jsx(\"div\", {\n        className: 'External'\n      }, this.props.children, __jsx(\"slot\", null)) : null, __jsx(Window, null, HotTable && __jsx(HotTable, null)), this.renderExWinPossibly(Div, Window), windows.map(function (w) {\n        return __jsx(MyMutationObserver, {\n          key: w.id\n        }, __jsx(Window, null, __jsx(MyMutationObserver, null, w.render(React, {\n          div: Div\n        }, _this4.state.appDataMap.get(w.id), function (v) {\n          _this4.setState({\n            appDataMap: new _Map(_this4.state.appDataMap).set(w.id, v)\n          });\n        }))));\n      }))));\n    }\n  }, {\n    key: \"discord\",\n    get: function get() {\n      return this.props.discord || DiscordPolyfill(this);\n    }\n  }]);\n\n  return Desktop;\n}(React.Component);\n\nexport { Desktop as default };","map":{"version":3,"sources":["D:/Graham/ObjectLand/main/OLWebFull/pages/desktop/index.js"],"names":["React","useState","root","Window_","Iframe_","MainWelcomePage","Desktop3D","chromeSwitch","DiscordPolyfill","Discord","AAPI","R","Polyglot","create","Desktop","props","state","objectTagSheet","HotTable","appDataMap","windows","d_a","undefined","javaPackage","jlink","Packages","com","smalltalkland","slandroid","err","aapi_","mode","aapi","code","addWindow","bind","renderExWinPossibly","renderExWin","f","fetch","reject","then","r","text","t","navigator","m","mounted","setState","prevProps","w","c","s","concat","filter","sw","id","Div","Window","wrap","identity","isBrowser","discord","div","Iframe","head","pipe","MyMutationObserver","Observer","MutationObserver","children","Old","render","lib","theDiscord","rct","map","get","v","set","Component"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,eAAP,MAA4B,aAA5B;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,SAAQC,YAAR,QAA2B,6BAA3B;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAO,KAAKC,CAAZ,MAAmB,OAAnB;AACA,OAAO,KAAKC,QAAZ,MAA0B,eAA1B;AACA,SAASC,MAAT,QAAuB,qBAAvB;;IACqBC,O;;;;;AACjB,qBAAuB;AAAA;;AAAA,QAAXC,KAAW,uEAAH,EAAG;;AAAA;;AAC3B,iFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AAACC,MAAAA,cAAc,EAAE,EAAjB;AAAoBC,MAAAA,QAAQ,EAAE,IAA9B;AAAmCC,MAAAA,UAAU,EAAE,UAA/C;AAAyDC,MAAAA,OAAO,EAAE,EAAlE;AAAqEC,MAAAA,GAAG,EAAEC,SAA1E;AAAoFC,MAAAA,WAAW,EAAED,SAAjG;AAA2GE,MAAAA,KAAK,EAAEF;AAAlH,KAAb;AACA,UAAKN,KAAL,GAAa,eAAc,EAAd,EAAiB,MAAKA,KAAtB,EAA6B,YAAM;AAAC,UAAG;AAAC,eAAO;AAACO,UAAAA,WAAW,EAAEE,QAAQ,CAACC,GAAT,CAAaC,aAAb,CAA2BC,SAAzC;AAAmDJ,UAAAA,KAAK,EAAEA;AAA1D,SAAP;AAAwE,OAA5E,CAA4E,OAAMK,GAAN,EAAU;AAAC,eAAO,EAAP;AAAU;AAAC,KAA1G,EAA5B,CAAb;AACA,UAAKC,KAAL,GAAapB,IAAI,CAACV,KAAD,CAAJ,CAAYe,KAAK,CAACgB,IAAlB,CAAb;;AACA,UAAKC,IAAL,GAAY,UAAAC,IAAI;AAAA,aAAI,MAAKH,KAAL,gCAAgB,MAAKI,SAAL,CAAeC,IAAf,+BAAhB,EAA2CF,IAA3C,CAAJ;AAAA,KAAhB;;AACA,QAAG;AACH,YAAKG,mBAAL,GAA2B7B,YAAY,CAAC;AAAA,eAAO,mBAAP;AAAA,OAAD,EAAuB,MAAK8B,WAAL,CAAiBF,IAAjB,+BAAvB,CAAvC;AACC,KAFD,CAEC,OAAMN,GAAN,EAAU;AACP,YAAKO,mBAAL,GAA2B;AAAA,eAAO,mBAAP;AAAA,OAA3B;AAEH;;AAAA;AACD,QAAIE,CAAJ;;AACA,QAAG;AACHA,MAAAA,CAAC,GAAGC,KAAJ;AACC,KAFD,CAEC,OAAMV,GAAN,EAAU;AACXS,MAAAA,CAAC,GAAG;AAAA,eAAM,SAAQE,MAAR,EAAN;AAAA,OAAJ;AAEC;;AAAA;AACAF,IAAAA,CAAD,CAAI,gBAAJ,EAAsBG,IAAtB,CAA2B,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,KAA5B,EAA0CF,IAA1C,CAA+C,UAAAG,CAAC,EAAI,CAGnD,CAHD,WAGS,UAAAf,GAAG,EAAI,CAAE,CAHlB;;AAIA,QAAG;AACH,UAAGgB,SAAH,EAAa,OAAO,qBAAP,EAA8BJ,IAA9B,CAAmC,UAAAK,CAAC;AAAA,eAAI,MAAKC,OAAL,IAAgB,MAAKC,QAAL,CAAc;AAAC9B,UAAAA,QAAQ,EAAE4B,CAAC,CAAC5B;AAAb,SAAd,CAApB;AAAA,OAApC;AACZ,KAFD,CAEC,OAAMW,GAAN,EAAU,CAGV;;AAAA;AACD,WAAO,yBAAP,EAAkCY,IAAlC,CAAuC,UAAAK,CAAC;AAAA,aAAI,MAAKE,QAAL,CAAc;AAAC3B,QAAAA,GAAG,EAAEyB;AAAN,OAAd,CAAJ;AAAA,KAAxC,WAA2E,UAAAjB,GAAG,EAAI,CAAE,CAApF;AA7B2B;AA8B1B;;;;uCACkBoB,S,EAAW;AAC1B;AACJ,UAAGA,SAAS,CAAClB,IAAV,KAAmB,KAAKhB,KAAL,CAAWgB,IAAjC,EAAsC,KAAKD,KAAL,GAAapB,IAAI,CAACV,KAAD,CAAJ,CAAY,KAAKe,KAAL,CAAWgB,IAAvB,CAAb;AACnC;;;wCACgB;AACf,WAAKgB,OAAL,GAAe,IAAf;AAEC;;;2CACqB;AAC1B,WAAKA,OAAL,GAAe,KAAf;AAEK;;;8BACSG,C,EAAE;AAAA;;AACR,aAAO,aAAY,UAAAC,CAAC;AAAA,eAAI,MAAI,CAACH,QAAL,CAAc,UAAAI,CAAC;AAAA,iBAAK;AAAChC,YAAAA,OAAO,EAAEgC,CAAC,CAAChC,OAAF,CAAUiC,MAAV,CAAiB,CAACH,CAAD,CAAjB;AAAV,WAAL;AAAA,SAAf,EAAsDC,CAAtD,CAAJ;AAAA,OAAb,CAAP;AACH;;;iCACYD,C,EAAE;AAAA;;AACnB,aAAO,aAAY,UAAAC,CAAC;AAAA,eAAI,MAAI,CAACH,QAAL,CAAc,UAAAI,CAAC;AAAA,iBAAK;AAAChC,YAAAA,OAAO,EAAEgC,CAAC,CAAChC,OAAF,CAAUkC,MAAV,CAAiB,UAAAC,EAAE;AAAA,qBAAIA,EAAE,CAACC,EAAH,KAAUN,CAAC,CAACM,EAAhB;AAAA,aAAnB;AAAV,WAAL;AAAA,SAAf,CAAJ;AAAA,OAAb,CAAP;AAEK;;;gCACWC,G,EAAIC,M,EAAO;AAC3B,aAAQ,MAAC,MAAD,QAAQ,MAAC,GAAD,OAAR,CAAR;AAEK;;;6BAEG;AAAA;;AACJ,UAAIC,IAAI,GAAGhD,CAAC,CAACiD,QAAb;AACA,UAAI1C,QAAJ;;AACA,UAAG;AACH,YAAG2B,SAAH,EAAa3B,QAAQ,GAAG,KAAKF,KAAL,CAAWE,QAAtB;AACZ,OAFD,CAEC,OAAMW,GAAN,EAAU;AACfX,QAAAA,QAAQ,GAAG,kBAASH,KAAT,EAAe;AAAC,iBAAQ,mBAAR;AAAuB,SAAlD;AAEK;;AAAA;AACD,UAAI8C,SAAS,GAAG,KAAhB;;AACA,UAAG;AACNhB,QAAAA,SAAD;AACAgB,QAAAA,SAAS,GAAG,IAAZ;AAEK,OAJD,CAIC,OAAMhC,GAAN,EAAU,CAGV;;AAAA;AACD,UAAIiC,OAAO,GAAG,KAAKA,OAAnB;AACA,UAAIL,GAAG,GAAG,KAAK1C,KAAL,CAAWgD,GAAX,IAAkB7D,IAAI,CAAC6D,GAAjC;AACA,UAAIL,MAAM,GAAG,KAAK3C,KAAL,CAAW2C,MAAX,IAAqBvD,OAAlC;AACA,UAAI6D,MAAM,GAAG,KAAKjD,KAAL,CAAWiD,MAAX,IAAqB5D,OAAlC;AACA,UAAG,KAAKW,KAAL,CAAWkD,IAAX,KAAoB,MAAvB,EAA8BN,IAAI,GAAGhD,CAAC,CAACuD,IAAF,CAAOP,IAAP,EAAY9C,MAAZ,CAAP;;AAC9B,UAAIsD,kBAAkB,GAAG,KAAKpD,KAAL,CAAWqD,QAAX,IAAwB,KAAKpD,KAAL,CAAWK,GAAX,IAAkB,KAAKL,KAAL,CAAWK,GAAX,CAAegD,gBAAzD,IAA+E,UAAAtD,KAAK;AAAA,eAAIA,KAAK,CAACuD,QAAV;AAAA,OAA7G;;AACAH,MAAAA,kBAAkB,GAAI,UAAAI,GAAG;AAAA,eAAI,UAAAxD,KAAK;AAAA,iBAAIwD,GAAG,IAAK,MAAC,GAAD,eAASxD,KAAT;AAAgB,YAAA,OAAO,EAAI;AAA3B,cAAkCA,KAAK,CAACuD,QAAxC,CAAZ;AAAA,SAAT;AAAA,OAAJ,CAAmFH,kBAAnF,CAArB;;AACAA,MAAAA,kBAAkB,GAAGA,kBAAkB,IAAK,UAAApD,KAAK;AAAA,eAAIA,KAAK,CAACuD,QAAV;AAAA,OAAjD;;AACA,UAAIlD,OAAO,GAAG,CAAC,KAAKL,KAAL,CAAWK,OAAX,IAAsB,EAAvB,EAA2BiC,MAA3B,CAAkC,KAAKtC,KAAL,CAAWgD,GAAX,KAAmB,IAAnB,GAA0B,CAAC;AAACP,QAAAA,EAAE,EAAE,SAAL;AAAegB,QAAAA,MAAM,EAAE,gBAACxE,KAAD,EAAW;AAAC,iBAAQ,MAAC,eAAD,OAAR;AAA6C;AAAhF,OAAD,CAA1B,GAAgH,EAAlJ,EAAsJqD,MAAtJ,CAA6JS,OAAO,GAAG,CAAC;AAACN,QAAAA,EAAE,EAAE,SAAL;AAAegB,QAAAA,MAAM,EAAE,gBAACxE,KAAD,EAAOyE,GAAP,EAAe;AAAC,cAAIC,UAAU,GAAGjE,OAAO,CAACT,KAAD,EAAOC,QAAP,CAAxB;AAAyC,iBAAQ,MAAC,GAAD,CAAK,GAAL,QAAS;AAAY,YAAA,GAAG,EAAIwE,GAAnB;AAAwB,YAAA,OAAO,EAAIX;AAAnC,YAAT,CAAR;AAAsF;AAAtK,OAAD,CAAH,GAA+K,EAAnV,EAAuVT,MAAvV,CAA8VQ,SAAS,IAAKvD,SAAd,GAA0B,CAAC;AAACkD,QAAAA,EAAE,EAAE,OAAL;AAAagB,QAAAA,MAAM,EAAE,gBAAAG,GAAG;AAAA,iBAAK,MAAC,SAAD;AAAW,YAAA,IAAI,EAAI7D,OAAnB;AAA4B,YAAA,UAAU,EAAI;AAA1C,YAAL;AAAA;AAAxB,OAAD,CAA1B,GAA0H,EAAxd,EAA4duC,MAA5d,CAAme,EAAne,EAAueA,MAAve,CAA8e,KAAKrC,KAAL,CAAWI,OAAzf,CAAd;AACA,aAAOuC,IAAI,CAAC,MAAC,kBAAD,QAAoB,MAAC,GAAD,QAC/B,KAAK5C,KAAL,CAAWgD,GAAX,KAAmB,IAAnB,GAA2B;AAAK,QAAA,SAAS,EAAI;AAAlB,SAA+B,KAAKhD,KAAL,CAAWuD,QAA1C,EAAmD,mBAAnD,CAA3B,GAAoG,IADrE,EAEpC,MAAC,MAAD,QAASpD,QAAQ,IAAI,MAAC,QAAD,OAArB,CAFoC,EAG/B,KAAKkB,mBAAL,CAAyBqB,GAAzB,EAA6BC,MAA7B,CAH+B,EAK/BtC,OAAO,CAACwD,GAAR,CAAY,UAAA1B,CAAC;AAAA,eAAK,MAAC,kBAAD;AAAoB,UAAA,GAAG,EAAIA,CAAC,CAACM;AAA7B,WAAiC,MAAC,MAAD,QAAQ,MAAC,kBAAD,QAAqBN,CAAC,CAACsB,MAAF,CAASxE,KAAT,EAAe;AAAC+D,UAAAA,GAAG,EAAEN;AAAN,SAAf,EAA0B,MAAI,CAACzC,KAAL,CAAWG,UAAX,CAAsB0D,GAAtB,CAA0B3B,CAAC,CAACM,EAA5B,CAA1B,EAA0D,UAACsB,CAAD,EAAO;AAAC,UAAA,MAAI,CAAC9B,QAAL,CAAc;AAAC7B,YAAAA,UAAU,EAAE,SAAQ,MAAI,CAACH,KAAL,CAAWG,UAAnB,EAA+B4D,GAA/B,CAAmC7B,CAAC,CAACM,EAArC,EAAwCsB,CAAxC;AAAb,WAAd;AAAwE,SAA1I,CAArB,CAAR,CAAjC,CAAL;AAAA,OAAb,CAL+B,CAApB,CAAD,CAAX;AAOH;;;wBAnCgB;AAAC,aAAO,KAAK/D,KAAL,CAAW+C,OAAX,IAAuBtD,eAAe,CAAC,IAAD,CAA7C;AAAqD;;;;EAvDlCR,KAAK,CAACgF,S;;SAAtBlE,O","sourcesContent":["import React, {useState} from 'react'\r\nimport root from 'react-shadow';\r\nimport Window_ from '../../src/Window.js'\r\nimport Iframe_ from '../../src/Iframe.js'\r\nimport MainWelcomePage from '../index.js';\r\nimport Desktop3D from '../3desktop/index.js'\r\nimport {chromeSwitch} from '../../../OLEx/dist/index.js'\r\nimport DiscordPolyfill from '../../src/DiscordPolyfill.js'\r\nimport Discord from '../discord/index.js'\r\nimport AAPI from '../../src/appi.js'\r\nimport * as R from 'ramda'\r\nimport * as Polyglot from 'node-polyglot'\r\nimport { create } from \"react-test-renderer\";\r\nexport default class Desktop extends React.Component{\r\n    constructor(props = {}){\r\nsuper(props);\r\nthis.state = {objectTagSheet: {},HotTable: null,appDataMap: new Map(),windows: [],d_a: undefined,javaPackage: undefined,jlink: undefined};\r\nthis.state = Object.assign({},this.state,(() => {try{return {javaPackage: Packages.com.smalltalkland.slandroid,jlink: jlink}}catch(err){return {}}})());\r\nthis.aapi_ = AAPI(React)(props.mode);\r\nthis.aapi = code => this.aapi_(this,this.addWindow.bind(this))(code);\r\ntry{\r\nthis.renderExWinPossibly = chromeSwitch(() => (<span></span>),this.renderExWin.bind(this));\r\n}catch(err){\r\n    this.renderExWinPossibly = () => (<span></span>);\r\n\r\n};\r\nvar f;\r\ntry{\r\nf = fetch;\r\n}catch(err){\r\nf = () => Promise.reject();\r\n\r\n};\r\n(f)('/pages/api/usr').then(r => r.text()).then(t => {\r\n\r\n\r\n}).catch(err => {});\r\ntry{\r\nif(navigator)import('@handsontable/react').then(m => this.mounted && this.setState({HotTable: m.HotTable}));\r\n}catch(err){\r\n\r\n\r\n}; \r\nimport('react-mutation-observer').then(m => this.setState({d_a: m})).catch(err => {});\r\n}\r\ncomponentDidUpdate(prevProps) {\r\n    // Typical usage (don't forget to compare props):\r\nif(prevProps.mode !== this.props.mode)this.aapi_ = AAPI(React)(this.props.mode)\r\n  }\r\ncomponentDidMount(){\r\n    this.mounted = true;\r\n    \r\n    }\r\n    componentWillUnmount(){\r\nthis.mounted = false;\r\n\r\n    }\r\n    addWindow(w){\r\n        return new Promise(c => this.setState(s => ({windows: s.windows.concat([w])}),c))\r\n    }\r\n    removeWindow(w){\r\nreturn new Promise(c => this.setState(s => ({windows: s.windows.filter(sw => sw.id !== w.id)})))\r\n\r\n    }\r\n    renderExWin(Div,Window){\r\nreturn (<Window><Div></Div></Window>)\r\n\r\n    }\r\n    get discord(){return this.props.discord || (DiscordPolyfill(this))}\r\nrender(){\r\n    let wrap = R.identity;\r\n    let HotTable;\r\n    try{\r\n    if(navigator)HotTable = this.state.HotTable;\r\n    }catch(err){\r\nHotTable = function(props){return (<span></span>)};\r\n\r\n    };\r\n    let isBrowser = false;\r\n    try{\r\n(navigator);\r\nisBrowser = true;\r\n\r\n    }catch(err){\r\n\r\n\r\n    };\r\n    let discord = this.discord;\r\n    let Div = this.props.div || root.div;\r\n    let Window = this.props.Window || Window_;\r\n    let Iframe = this.props.Iframe || Iframe_;\r\n    if(this.props.head === 'less')wrap = R.pipe(wrap,create);\r\n    let MyMutationObserver = this.props.Observer || (this.state.d_a && this.state.d_a.MutationObserver) || (props => props.children);\r\n    MyMutationObserver = (Old => props => Old && (<Old {...props} subtree = {true}>{props.children}</Old>))(MyMutationObserver);\r\n    MyMutationObserver = MyMutationObserver || (props => props.children);\r\n    let windows = (this.props.windows || []).concat(this.props.div === null ? [{id: 'welcome',render: (React) => {return (<MainWelcomePage></MainWelcomePage>)}}] : []).concat(discord ? [{id: 'discord',render: (React,lib) => {let theDiscord = Discord(React,useState);return (<lib.Div><theDiscord lib = {lib} discord = {discord}></theDiscord></lib.Div>)}}] : []).concat(isBrowser  && Desktop3D ? [{id: 'three',render: rct => (<Desktop3D dcls = {Desktop} linkParent = {this}></Desktop3D>)}] : []).concat([]).concat(this.state.windows)\r\n    return wrap(<MyMutationObserver><Div>\r\n    {this.props.div === null ? (<div className = {'External'}>{this.props.children}<slot></slot></div>): null}\r\n<Window>{HotTable && <HotTable></HotTable>}</Window>\r\n    {this.renderExWinPossibly(Div,Window)}\r\n\r\n    {windows.map(w => (<MyMutationObserver key = {w.id}><Window><MyMutationObserver>{w.render(React,{div: Div},this.state.appDataMap.get(w.id),(v) => {this.setState({appDataMap: new Map(this.state.appDataMap).set(w.id,v)})})}</MyMutationObserver></Window></MyMutationObserver>))}\r\n    </Div></MyMutationObserver>)\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}