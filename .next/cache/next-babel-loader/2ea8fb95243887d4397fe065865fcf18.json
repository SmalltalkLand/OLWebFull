{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _Map from \"@babel/runtime-corejs2/core-js/map\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport root from 'react-shadow';\nimport Window_ from '../../src/Window.js';\nimport Iframe_ from '../../src/Iframe.js';\nimport MainWelcomePage from '../index.js';\nimport Desktop3D from '../3desktop/index.js';\nimport { chromeSwitch } from '../../../OLEx/dist/index.js';\nimport DiscordPolyfill from '../../src/DiscordPolyfill.js';\nimport Discord from '../discord/index.js';\nimport AAPI from '../../src/appi.js';\nimport * as R from 'ramda';\nimport * as Polyglot from 'node-polyglot';\nimport { create } from \"react-test-renderer\";\nexport default class Desktop extends React.Component {\n  constructor(props = {}) {\n    super(props);\n    this.state = {\n      objectTagSheet: {},\n      HotTable: null,\n      appDataMap: new _Map(),\n      windows: [],\n      d_a: undefined,\n      javaPackage: undefined,\n      jlink: undefined\n    };\n    this.state = _Object$assign({}, this.state, (() => {\n      try {\n        return {\n          javaPackage: Packages.com.smalltalkland.slandroid,\n          jlink: jlink\n        };\n      } catch (err) {\n        return {};\n      }\n    })());\n    this.aapi_ = AAPI(React)(props.mode);\n\n    this.aapi = code => this.aapi_(this, this.addWindow.bind(this))(code);\n\n    try {\n      this.renderExWinPossibly = chromeSwitch(() => __jsx(\"span\", null), this.renderExWin.bind(this));\n    } catch (err) {\n      this.renderExWinPossibly = () => __jsx(\"span\", null);\n    }\n\n    ;\n    var f;\n\n    try {\n      f = fetch;\n    } catch (err) {\n      f = () => _Promise.reject();\n    }\n\n    ;\n    f('/pages/api/usr').then(r => r.text()).then(t => {}).catch(err => {});\n\n    try {\n      if (navigator) import('@handsontable/react').then(m => this.mounted && this.setState({\n        HotTable: m.HotTable\n      }));\n    } catch (err) {}\n\n    ;\n    import('react-mutation-observer').then(m => this.setState({\n      d_a: m\n    })).catch(err => {});\n  }\n\n  componentDidUpdate(prevProps) {\n    // Typical usage (don't forget to compare props):\n    if (prevProps.mode !== this.props.mode) this.aapi_ = AAPI(React)(this.props.mode);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  addWindow(w) {\n    return new _Promise(c => this.setState(s => ({\n      windows: s.windows.concat([w])\n    }), c));\n  }\n\n  removeWindow(w) {\n    return new _Promise(c => this.setState(s => ({\n      windows: s.windows.filter(sw => sw.id !== w.id)\n    })));\n  }\n\n  renderExWin(Div, Window) {\n    return __jsx(Window, null, __jsx(Div, null));\n  }\n\n  get discord() {\n    return this.props.discord || DiscordPolyfill(this);\n  }\n\n  render() {\n    let wrap = R.identity;\n    let HotTable;\n\n    try {\n      if (navigator) HotTable = this.state.HotTable;\n    } catch (err) {\n      HotTable = function (props) {\n        return __jsx(\"span\", null);\n      };\n    }\n\n    ;\n    let isBrowser = false;\n\n    try {\n      navigator;\n      isBrowser = true;\n    } catch (err) {}\n\n    ;\n    let discord = this.discord;\n    let Div = this.props.div || root.div;\n    let Window = this.props.Window || Window_;\n    let Iframe = this.props.Iframe || Iframe_;\n\n    let MyMutationObserver = this.props.Observer || this.state.d_a && this.state.d_a.MutationObserver || (props => props.children);\n\n    MyMutationObserver = (Old => props => Old && __jsx(Old, _extends({}, props, {\n      subtree: true\n    }), props.children))(MyMutationObserver);\n\n    MyMutationObserver = MyMutationObserver || (props => props.children);\n\n    let windows = (this.props.windows || []).concat(this.props.div === null ? [{\n      id: 'welcome',\n      render: React => {\n        return __jsx(MainWelcomePage, null);\n      }\n    }] : []).concat(discord ? [{\n      id: 'discord',\n      render: (React, lib) => {\n        let theDiscord = Discord(React, useState);\n        return __jsx(lib.Div, null, __jsx(\"theDiscord\", {\n          lib: lib,\n          discord: discord\n        }));\n      }\n    }] : []).concat(isBrowser && Desktop3D ? [{\n      id: 'three',\n      render: rct => __jsx(Desktop3D, {\n        dcls: Desktop,\n        linkParent: this\n      })\n    }] : []).concat([]).concat(this.state.windows);\n    if (this.props.mode === 'watch') wrap = R.pipe(wrap, e => __jsx(MyMutationObserver, null));\n    if (this.props.head === 'less') wrap = R.pipe(wrap, create);\n    if (this.props.head === 'embed') wrap = R.pipe(wrap, e => {\n      e.props.children[0].props.children.map(c => c.key === 'sutils' ? c.props.children[0].props.children[0].props.children[0].children.map(nc => ReactDOM.render(nc, (e => {\n        var _document$querySelect;\n\n        e.classList.add('ol');\n        let existing = document.querySelector('.sprite-info_group_14-B_').querySelector('.ol');\n        if (existing) return existing;\n        (_document$querySelect = document.querySelector('.sprite-info_group_14-B_')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.appendChild(e);\n        return e;\n      })(document.createElement('div')))) : null);\n    });\n    return wrap(__jsx(MyMutationObserver, null, __jsx(Div, null, this.props.div === null ? __jsx(\"div\", {\n      className: 'External'\n    }, this.props.children, __jsx(\"slot\", null)) : null, __jsx(Window, null, HotTable && __jsx(HotTable, null)), this.renderExWinPossibly(Div, Window), windows.map(w => __jsx(MyMutationObserver, {\n      key: w.id\n    }, __jsx(Window, null, __jsx(MyMutationObserver, null, w.render(React, {\n      div: Div\n    }, this.state.appDataMap.get(w.id), v => {\n      this.setState({\n        appDataMap: new _Map(this.state.appDataMap).set(w.id, v)\n      });\n    }))))))));\n  }\n\n}","map":{"version":3,"sources":["D:/Graham/ObjectLand/main/OLWebFull/pages/desktop/index.js"],"names":["React","useState","root","Window_","Iframe_","MainWelcomePage","Desktop3D","chromeSwitch","DiscordPolyfill","Discord","AAPI","R","Polyglot","create","Desktop","Component","constructor","props","state","objectTagSheet","HotTable","appDataMap","windows","d_a","undefined","javaPackage","jlink","Packages","com","smalltalkland","slandroid","err","aapi_","mode","aapi","code","addWindow","bind","renderExWinPossibly","renderExWin","f","fetch","reject","then","r","text","t","catch","navigator","m","mounted","setState","componentDidUpdate","prevProps","componentDidMount","componentWillUnmount","w","c","s","concat","removeWindow","filter","sw","id","Div","Window","discord","render","wrap","identity","isBrowser","div","Iframe","MyMutationObserver","Observer","MutationObserver","children","Old","lib","theDiscord","rct","pipe","e","head","map","key","nc","ReactDOM","classList","add","existing","document","querySelector","appendChild","createElement","get","v","set"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\r\nimport root from 'react-shadow';\r\nimport Window_ from '../../src/Window.js'\r\nimport Iframe_ from '../../src/Iframe.js'\r\nimport MainWelcomePage from '../index.js';\r\nimport Desktop3D from '../3desktop/index.js'\r\nimport {chromeSwitch} from '../../../OLEx/dist/index.js'\r\nimport DiscordPolyfill from '../../src/DiscordPolyfill.js'\r\nimport Discord from '../discord/index.js'\r\nimport AAPI from '../../src/appi.js'\r\nimport * as R from 'ramda'\r\nimport * as Polyglot from 'node-polyglot'\r\nimport { create } from \"react-test-renderer\";\r\nexport default class Desktop extends React.Component{\r\n    constructor(props = {}){\r\nsuper(props);\r\nthis.state = {objectTagSheet: {},HotTable: null,appDataMap: new Map(),windows: [],d_a: undefined,javaPackage: undefined,jlink: undefined};\r\nthis.state = Object.assign({},this.state,(() => {try{return {javaPackage: Packages.com.smalltalkland.slandroid,jlink: jlink}}catch(err){return {}}})());\r\nthis.aapi_ = AAPI(React)(props.mode);\r\nthis.aapi = code => this.aapi_(this,this.addWindow.bind(this))(code);\r\ntry{\r\nthis.renderExWinPossibly = chromeSwitch(() => (<span></span>),this.renderExWin.bind(this));\r\n}catch(err){\r\n    this.renderExWinPossibly = () => (<span></span>);\r\n\r\n};\r\nvar f;\r\ntry{\r\nf = fetch;\r\n}catch(err){\r\nf = () => Promise.reject();\r\n\r\n};\r\n(f)('/pages/api/usr').then(r => r.text()).then(t => {\r\n\r\n\r\n}).catch(err => {});\r\ntry{\r\nif(navigator)import('@handsontable/react').then(m => this.mounted && this.setState({HotTable: m.HotTable}));\r\n}catch(err){\r\n\r\n\r\n}; \r\nimport('react-mutation-observer').then(m => this.setState({d_a: m})).catch(err => {});\r\n}\r\ncomponentDidUpdate(prevProps) {\r\n    // Typical usage (don't forget to compare props):\r\nif(prevProps.mode !== this.props.mode)this.aapi_ = AAPI(React)(this.props.mode)\r\n  }\r\ncomponentDidMount(){\r\n    this.mounted = true;\r\n    \r\n    }\r\n    componentWillUnmount(){\r\nthis.mounted = false;\r\n\r\n    }\r\n    addWindow(w){\r\n        return new Promise(c => this.setState(s => ({windows: s.windows.concat([w])}),c))\r\n    }\r\n    removeWindow(w){\r\nreturn new Promise(c => this.setState(s => ({windows: s.windows.filter(sw => sw.id !== w.id)})))\r\n\r\n    }\r\n    renderExWin(Div,Window){\r\nreturn (<Window><Div></Div></Window>)\r\n\r\n    }\r\n    get discord(){return this.props.discord || (DiscordPolyfill(this))}\r\nrender(){\r\n    let wrap = R.identity;\r\n    let HotTable;\r\n    try{\r\n    if(navigator)HotTable = this.state.HotTable;\r\n    }catch(err){\r\nHotTable = function(props){return (<span></span>)};\r\n\r\n    };\r\n    let isBrowser = false;\r\n    try{\r\n(navigator);\r\nisBrowser = true;\r\n\r\n    }catch(err){\r\n\r\n\r\n    };\r\n    let discord = this.discord;\r\n    let Div = this.props.div || root.div;\r\n    let Window = this.props.Window || Window_;\r\n    let Iframe = this.props.Iframe || Iframe_;\r\n    let MyMutationObserver = this.props.Observer || (this.state.d_a && this.state.d_a.MutationObserver) || (props => props.children);\r\n    MyMutationObserver = (Old => props => Old && (<Old {...props} subtree = {true}>{props.children}</Old>))(MyMutationObserver);\r\n    MyMutationObserver = MyMutationObserver || (props => props.children);\r\n    let windows = (this.props.windows || []).concat(this.props.div === null ? [{id: 'welcome',render: (React) => {return (<MainWelcomePage></MainWelcomePage>)}}] : []).concat(discord ? [{id: 'discord',render: (React,lib) => {let theDiscord = Discord(React,useState);return (<lib.Div><theDiscord lib = {lib} discord = {discord}></theDiscord></lib.Div>)}}] : []).concat(isBrowser  && Desktop3D ? [{id: 'three',render: rct => (<Desktop3D dcls = {Desktop} linkParent = {this}></Desktop3D>)}] : []).concat([]).concat(this.state.windows)\r\n    if(this.props.mode === 'watch')wrap = R.pipe(wrap,e => (<MyMutationObserver></MyMutationObserver>));\r\n    if(this.props.head === 'less')wrap = R.pipe(wrap,create);\r\n    if(this.props.head === 'embed')wrap = R.pipe(wrap,e => {e.props.children[0].props.children.map(c => c.key === 'sutils' ? c.props.children[0].props.children[0].props.children[0].children.map(nc => ReactDOM.render(nc,(e => {e.classList.add('ol');let existing = document.querySelector('.sprite-info_group_14-B_').querySelector('.ol');if(existing)return existing;document.querySelector('.sprite-info_group_14-B_')?.appendChild(e); return e})(document.createElement('div')))) : null)});\r\n    return wrap(<MyMutationObserver><Div>\r\n    {this.props.div === null ? (<div className = {'External'}>{this.props.children}<slot></slot></div>): null}\r\n<Window>{HotTable && <HotTable></HotTable>}</Window>\r\n    {this.renderExWinPossibly(Div,Window)}\r\n\r\n    {windows.map(w => (<MyMutationObserver key = {w.id}><Window><MyMutationObserver>{w.render(React,{div: Div},this.state.appDataMap.get(w.id),(v) => {this.setState({appDataMap: new Map(this.state.appDataMap).set(w.id,v)})})}</MyMutationObserver></Window></MyMutationObserver>))}\r\n    </Div></MyMutationObserver>)\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}