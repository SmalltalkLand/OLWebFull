{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\n\nfunction strip(html) {\n  var doc = new DOMParser().parseFromString(html, 'text/html');\n  return doc.body.textContent || \"\";\n}\n\nexport default function changeLanguage(set, theRef) {\n  var lang, res, confirmed;\n  return _regeneratorRuntime.async(function changeLanguage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          lang = prompt('language');\n          _context.t0 = _regeneratorRuntime;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(fetch('https://'.concat(lang.concat('.wikipedia.org')), {\n            mode: 'no-cors'\n          }));\n\n        case 4:\n          _context.t1 = _context.sent.text();\n          _context.next = 7;\n          return _context.t0.awrap.call(_context.t0, _context.t1);\n\n        case 7:\n          res = _context.sent;\n          theRef.current.innerText = 'click to continue' + strip(res);\n          _context.next = 11;\n          return _regeneratorRuntime.awrap(new _Promise(function (c) {\n            setTimeout(c.bind(null, false), 4000);\n            theRef.current.addEventListener('click', function a() {\n              c(true);\n              theRef.current.removeEventListener('click', a);\n            });\n          }));\n\n        case 11:\n          confirmed = _context.sent;\n          if (confirmed) set(lang);\n\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","map":{"version":3,"sources":["D:/Graham/ObjectLand/main/OLWebFull/src/lang.js"],"names":["strip","html","doc","DOMParser","parseFromString","body","textContent","changeLanguage","set","theRef","lang","prompt","fetch","concat","mode","text","res","current","innerText","c","setTimeout","bind","addEventListener","a","removeEventListener","confirmed"],"mappings":";;;AAAA,SAASA,KAAT,CAAeC,IAAf,EAAoB;AAChB,MAAIC,GAAG,GAAG,IAAIC,SAAJ,GAAgBC,eAAhB,CAAgCH,IAAhC,EAAsC,WAAtC,CAAV;AACA,SAAOC,GAAG,CAACG,IAAJ,CAASC,WAAT,IAAwB,EAA/B;AACF;;AACF,eAAe,SAAeC,cAAf,CAA8BC,GAA9B,EAAkCC,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,UAAAA,IADO,GACAC,MAAM,CAAC,UAAD,CADN;AAAA;AAAA;AAAA,2CAEYC,KAAK,CAAC,WAAWC,MAAX,CAAkBH,IAAI,CAACG,MAAL,CAAY,gBAAZ,CAAlB,CAAD,EAAkD;AAACC,YAAAA,IAAI,EAAE;AAAP,WAAlD,CAFjB;;AAAA;AAAA,sCAEuFC,IAFvF;AAAA;AAAA;;AAAA;AAEPC,UAAAA,GAFO;AAGXP,UAAAA,MAAM,CAACQ,OAAP,CAAeC,SAAf,GAA2B,sBAAsBlB,KAAK,CAACgB,GAAD,CAAtD;AAHW;AAAA,2CAIW,aAAY,UAAAG,CAAC,EAAI;AAACC,YAAAA,UAAU,CAACD,CAAC,CAACE,IAAF,CAAO,IAAP,EAAY,KAAZ,CAAD,EAAoB,IAApB,CAAV;AAAqCZ,YAAAA,MAAM,CAACQ,OAAP,CAAeK,gBAAf,CAAgC,OAAhC,EAAwC,SAASC,CAAT,GAAY;AAACJ,cAAAA,CAAC,CAAC,IAAD,CAAD;AAASV,cAAAA,MAAM,CAACQ,OAAP,CAAeO,mBAAf,CAAmC,OAAnC,EAA2CD,CAA3C;AAA8C,aAA5G;AAA8G,WAArK,CAJX;;AAAA;AAIPE,UAAAA,SAJO;AAKf,cAAGA,SAAH,EAAajB,GAAG,CAACE,IAAD,CAAH;;AALE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["function strip(html){\r\n    var doc = new DOMParser().parseFromString(html, 'text/html');\r\n    return doc.body.textContent || \"\";\r\n }\r\nexport default async function changeLanguage(set,theRef){\r\n    let lang = prompt('language');\r\n    let res = await (await fetch('https://'.concat(lang.concat('.wikipedia.org')),{mode: 'no-cors'})).text();\r\n    theRef.current.innerText = 'click to continue' + strip(res);\r\n    let confirmed = await new Promise(c => {setTimeout(c.bind(null,false),4000); theRef.current.addEventListener('click',function a(){c(true); theRef.current.removeEventListener('click',a)})})\r\nif(confirmed)set(lang)\r\n    }"]},"metadata":{},"sourceType":"module"}